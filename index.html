<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Поехали!</title>
    <meta name="description" content="Poehali.dev — запусти свой сайт за минуту!"/>
    <meta name="author" content="poehali.dev"/>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <meta property="og:title" content="Поехали!">
    <meta property="og:description" content="Ваш личный программист, который делает сайты в 30 раз быстрее обычного.">
    <meta property="og:image:width" content="4800">
    <meta property="og:image:height" content="2520">
    <meta property="og:image:alt" content="Поехали! — сервис разработки сайтов с помощью ИИ">
    <meta property="og:image" content="https://cdn.poehali.dev/intertnal/img/og.png">
    <meta name="twitter:image" content="https://cdn.poehali.dev/intertnal/img/og.png">

    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS COMMENT! -->

    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS COMMENT! -->
    <script src="https://cdn.poehali.dev/intertnal/js/pp-min-2.js"></script>
    <script src="https://cdn.poehali.dev/intertnal/js/route-min.js"></script>
    <script src="https://cdn.poehali.dev/intertnal/js/telemetry-min.js"></script>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS COMMENT! -->

    <meta name="pp-name" value="psychology-site-launch">
      <script src="https://cdn.poehali.dev/intertnal/js/inspector-min.js"></script>
      <script src="https://paymaster.ru/cpay/sdk/payment-widget.js"></script>
      <style>
        button[btn-pay-6kwo9avfxomyab7q80fknow06] { display: inline-block; padding: 16px 24px; border-radius: 8px; color: #fff; background-color: #58bfe8; font-size: 16px; font-family: "Lato", "Arial", sans-serif; line-height: 16px; outline: none; border: none; }
        button[btn-pay-6kwo9avfxomyab7q80fknow06]:hover { opacity: 0.9; cursor: pointer; }
      </style>
  </head>

<body>
<div id="root"></div>
<script type="module" src="/src/main.tsx"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
        m[i] = m[i] || function () {
            (m[i].a = m[i].a || []).push(arguments)
        };
        m[i].l = 1 * new Date();
        for (var j = 0; j < document.scripts.length; j++) {
            if (document.scripts[j].src === r) {
                return;
            }
        }
        k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(101026698, "init", {
        trustedDomains: ["poehali.dev"],
        clickmap: true,
        trackLinks: true,
        accurateTrackBounce: true,
        webvisor: true,
        trackHash: true
    });
</script>
<noscript>
    <div><img src="https://mc.yandex.ru/watch/101026698" style="position:absolute; left:-9999px;" alt=""/></div>
</noscript>
<!-- /Yandex.Metrika counter -->

<script>
function initPaymaster() {
  const payButtons = document.querySelectorAll("[btn-pay-nldizlugp9shjhaznfvxvk9gp]");
  payButtons.forEach(function(button) {
    // Убираем старые обработчики
    button.removeEventListener("click", handlePayment);
    button.addEventListener("click", handlePayment);
  });
}

function handlePayment() {
  if (typeof cpay !== 'undefined') {
    var paymentWidget = new cpay.PaymentWidget();
    paymentWidget.init({
      "merchantId":"65e582de-004b-4c24-96b2-bd0e0777e959",
      "invoice":{"description":"MindCare"},
      "amount":{"currency":"RUB","value":0},
      "receipt":null,
      "paymentForm":{
        "theme":"light",
        "primaryColor":"#58bfe8",
        "productCard":{"title":"MindCare","description":"MindCare","imageUrl":null},
        "fields":[
          {"type":"input","name":"customerName","label":"ФИО","hint":null,"required":true,"selectOptions":null,"additionalAmount":null},
          {"type":"input","name":"customerEmail","label":"E-mail","hint":null,"required":true,"selectOptions":null,"additionalAmount":null},
          {"type":"input","name":"amount","label":"Сумма","hint":null,"required":true,"selectOptions":null,"additionalAmount":null}
        ]
      }
    });
  } else {
    console.error('PayMaster SDK не загружен');
  }
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', initPaymaster);

// Переинициализация для динамически добавленных элементов
const observer = new MutationObserver(initPaymaster);
observer.observe(document.body, { childList: true, subtree: true });
</script>
</body>
</html>